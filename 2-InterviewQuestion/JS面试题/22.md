# 请解释为什么接下来这段代码不是 IIFE (立即调用的函数表达式)：function foo(){ }();要做哪些改动使它变成 IIFE

以`function`关键字开头的语句会被解析为函数声明，而函数声明是不允许直接运行的。

原因：

1. js预编译的特点：js在预编译阶段，会解释函数声明，但却会忽略表达式
2. 当js执行到`function(){//code}`时，由于`function(){//code}`在预编译阶段已经被解释过，js会跳过`function(){//code}`，试图去执行()，会报错
3. 只有当解析器把这句话解析为函数表达式，才能够直接运行



实现：

```js
(function foo(){
    // code..
})()
!function foo(){ }()
+function foo(){ }()
```



IIFE的一些作用：

1. 创建作用域，内部保存一些大量临时变量的代码防止命名冲突
2. 一些库的外层用这种形式包起来防止作用域污染
3. 运行一些只执行一次的代码