# 类数组对象转换为数组

**类数组对象**

只包含使用从零开始，且自然递增的整数做键名，并且定义了length表示元素的个数的对象，我们就认为他是类数组对象，类数组对象可以进行读写操作和遍历操作

```bash
var arrlike={
	length:4,
	2:'foo'
}
```

**转换成数组方法**

 1. Array.prototype.slice.call(arguments)

 2. Array.prototype.splice.call(arguments,0);

 3. Array.from——ES6

    ```bash
    Array.from(arrayLikeObject)
    ```

 4. Array.prototype.concat.apply([],arguments)

 5. spread扩展运算符

    <font color='red'>注意：扩展运算符背后调用的是遍历器接口（ Symbol.iterator ），如果一个对象没有部署这个接口，就无法转换</font>

    ```bash
    let arrayLikeObject = {
    	'0': 'a',
    	'1': 'b',
    	'2': 'c',
    	length: 3
    };
    
    [...arrayLikeObject ]  //报错TypeError: arrayLike is not iterable
    ```

    为类数组部署 Iterator 接口：

    - 方法1：

    ```bash
    let arrayLikeObject = {
    	'0': 'a',
    	'1': 'b',
    	'2': 'c',
    	length: 3,
    	[Symbol.iterator]: Array.prototype[Symbol.iterator]
    };
    console.log([...arrayLikeObject ]) 		//["a", "b", "c"]
    ```

    - 方法2：

    ```bash
    NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
    // 或者
    NodeList.prototype[Symbol.iterator] = [][Symbol.iterator];
    [...document.querySelectorAll('div')] // 正常执行
    ```

 6. $.makeArray()

    JQuery中的内置方法

    ```bash
    $.makeArray(arrayLikeObject)
    ```

**常见的类数组**

1. arguments

   ```bash
   console.log(Array.isArray(arguments));#false
   console.log(arguments);
   #node打印: {}
   #chrome打印: Arguments [callee: ƒ, Symbol(Symbol.iterator): ƒ]
   #因为arguments具有Symbol.iterator属性，所以它可以用扩展运算符(...arguments) 或 其他�使用迭代器的方法
   ```

2. document.querySelectorAll获取的节点

   ```bash
   #仅限浏览器中
   const nodeList = document.querySelectorAll('*');
   console.log(Array.isArray(nodeList));#false
   ```

3. 字符串string

   ```bash
   const array = Array.from('abc');
   console.log(array);
   #["a", "b", "c"]
   ```

4. TypedArray

   ```bash
   const typedArray = new Int8Array(new ArrayBuffer(3));
   console.log(Array.isArray(typedArray));
   #false
   ```

5. {length:0}是类数组的特殊情况，转换时可以执行成功，返回空数组[]

   ```bash
   console.log(Array.from({length:0}));
   #[]
   console.log(Array.from(''));
   #[]
   ```

   