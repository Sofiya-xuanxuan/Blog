# 为什么普通 for 循环的性能远远高于 forEach 的性能，请解释其中的原因

**区别：**

一个按顺序遍历，一个使用iterator迭代器遍历



**从数据结构来说：**

for循环是随机访问元素，forEach是顺序链表访问元素



**性能上：**

对于arrayList，是顺序表，使用for循环可以顺序访问，速度较快；使用forEach会比for循环稍慢一些。

对于linkedlist，是单链表，使用for循环每次都要从第一个元素读取next域来读取，速度非常慢；使用forEach可以直接读取当前结点，数据较快。



**比较：**

- **forEach**

  缺点：

  ​	a. 不能同时遍历多个集合，在遍历的时候无法修改和删除集合数据

  ​	b. 方法不能使用break，continue语句跳出循环，或者使用return从函数体返回，对空数组不会执行回调函数

  优点：

  ​	a. 遍历的时候更加简洁，效率和for循环相同，不用关心集合下标的问题，减少了出错的效率

- **for**

  缺点：

  ​	a. 结构比while循环复杂，容易出编码错误

  优点：

  ​	a. 程序简洁，结构清晰，循环初始化，循环变量化，循环体和循环条件位置突出

- **for in**

  定义：

  ​	用于循环遍历数组或对象属性，fot in循环里面的index是string类型的，代码每执行一次，就会对数组的元素或者对象的属性进行一次操作

  缺点：

  ​	某些情况下，会出现随机顺序的遍历，因为里面的值是string类型，所以增加了转换过程，因此开销较大

  优点：

  ​	可以遍历数组的键名，遍历对象简洁方便

- **for of**

  （可遍历map，object,array,set string等）用来遍历数据，比如组中的值，

  ​    优点：

  ​		a. 避免了for in的所有缺点，可以使用break,continue和return，不仅支持数组的遍历，还可以遍历类似数组的对象，支持字符串的遍历                

  ​		b. 最简洁，最直接的遍历数组的语法                

  ​		c. 支持map和Set对象遍历

  ​     缺点：

  ​		不适用于处理原有的原生对象（原生对象是一个子集，包含一些在运动过程中动态创建的对象）

