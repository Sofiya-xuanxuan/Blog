# JavaScript执行上下文的理解

### 介绍几个相关名词

#### 变量对象(variable object)

> Every execution context has associated with it a variable object. Variables and functions declared in the source text are added as properties of the variable object. For function code, parameters are added as properties of the variable object.

每一个执行上下文都会分配一个**<font color='red'>变量对象(variable object)</font>**，变量对象的属性由 【**变量(variable)**】和【**函数声明(function declaration)**】构成。

在函数上下文情况下，参数列表(parameter list)也会被加入到**<font color='red'>变量对象(variable object)</font>**中作为属性。

**<font color='red'>变量对象(variable object)</font>**与当前作用域息息相关。不同作用域的**<font color='red'>变量对象(variable object)</font>**互相不相同，它保存了当前作用域的所有函数和变量。

这里有一点特殊就是只有 **函数声明(function declaration)** 会被加入到变量对象中，而 **函数表达式(function expression)**则不会

```js
// 函数声明
function a(){}
console.log(typeof a); // "function"

// 函数表达式
var a = function _a(){};
console.log(typeof a); // "function"
console.log(typeof _a); // "undefined"
```

#### 活动对象(activation object)

> When control enters an execution context for function code, an object called the activation object is created and associated with the execution context. The activation object is initialised with a property with name arguments and attributes { DontDelete }. The initial value of this property is the arguments object described below.
> The activation object is then used as the variable object for the purposes of variable instantiation.

当函数被激活，那么一个**<font color='red'>活动对象(activation object)</font>**就会被创建并且分配给执行上下文。

**<font color='red'>活动对象(activation object)</font>**由特殊对象arguments初始化而成。随后，他被当做**<font color='red'>变量对象(variable object)</font>**用于变量初始化。

```js
function a(name, age){
    var gender = "male";
    function b(){}
}
a(“k”,10);
```

a被调用时，在a的执行上下文会创建一个活动对象AO，并且被初始化为 AO = [arguments]。随后AO又被当做变量对象(variable object)VO进行变量初始化,此时 VO = `[arguments].concat([name,age,gender,b])`。

### 什么是执行上下文(execution context)



### 执行上下文类型



### 什么是执行栈





### 怎么创建执行上下文

#### 1.创建阶段

#### 2.执行阶段



### 总结

